<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>SOA·IACORE — Executive Dashboard</title>

<style>
:root{
  --bg:#0b1324;
  --panel:#121b33;
  --ink:#e5ecff;
  --muted:#8aa0c6;
  --blue:#4ea2ff;
  --ok:#36d399;
  --warn:#fbbf24;
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI}
body{
  margin:0;
  background:linear-gradient(180deg,#08101f,#0c1630);
  color:var(--ink);
}
header{
  padding:28px 40px;
  border-bottom:1px solid rgba(255,255,255,.08);
}
header h1{margin:0;font-size:28px;font-weight:600}
header p{margin:6px 0 0;color:var(--muted)}
main{max-width:1200px;margin:40px auto;padding:0 32px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:22px}
.card{
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.08);
  border-radius:16px;
  padding:22px;
}
.card h2{margin:0 0 6px;font-size:17px;color:var(--muted)}
.metric{font-size:36px;font-weight:700;margin:6px 0}
.ok{color:var(--ok)} .warn{color:var(--warn)} .blue{color:var(--blue)}
footer{margin:50px 0 30px;text-align:center;color:var(--muted);font-size:13px}
</style>
</head>

<body>

<header>
  <h1>SOA·IACORE — Executive Dashboard</h1>
  <p id="updated">Cargando estado…</p>
</header>

<main>
  <section class="grid">

    <div class="card">
      <h2>Estado General</h2>
      <div class="metric blue" id="general">–</div>
    </div>

    <div class="card">
      <h2>Pipeline Publicación</h2>
      <div class="metric ok" id="pipeline">–</div>
    </div>

    <div class="card">
      <h2>Automatización</h2>
      <div class="metric ok" id="automation">–</div>
    </div>

    <div class="card">
      <h2>Dashboard UI</h2>
      <div class="metric warn" id="uiux">–</div>
    </div>

    <div class="card">
      <h2>Publicación Final</h2>
      <div class="metric blue" id="deploy">–</div>
    </div>

  </section>
</main>

<footer>
  SOA·IACORE · KPIs dinámicos en tiempo real
</footer>

<script>
fetch('status.json',{cache:'no-store'})
.then(r=>r.json())
.then(data=>{
  document.getElementById('updated').innerText =
    'Última actualización: ' + data.ultimo_update;

  let total = 0;
  data.fases.forEach(f => total += f.porcentaje);
  document.getElementById('general').innerText =
    Math.round(total / data.fases.length) + '%';

  data.fases.forEach(f=>{
    if(f.nombre.includes('Push')) pipeline.innerText = f.porcentaje + '%';
    if(f.nombre.includes('Cron')) automation.innerText = f.porcentaje + '%';
    if(f.nombre.includes('Dashboard')) uiux.innerText = f.porcentaje + '%';
    if(f.nombre.includes('AutoDeploy')) deploy.innerText = f.porcentaje + '%';
  });
})
.catch(e=>{
  document.getElementById('updated').innerText = 'Error cargando status.json';
  console.error(e);
});
</script>

</body>
</html>

