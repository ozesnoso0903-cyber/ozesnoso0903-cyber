<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>SOA·IACORE · Executive Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0b1020; --panel:#121a2f; --accent:#4ea2ff;
  --ink:#e6ecff; --muted:#9aa6c2;
  --ok:#2ecc71; --warn:#f4b400;
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto}
body{margin:0;background:linear-gradient(180deg,#060b18,#0b1020);color:var(--ink)}
header{padding:28px 36px;border-bottom:1px solid rgba(255,255,255,.08)}
header h1{margin:0;font-size:26px;font-weight:600}
header p{margin:6px 0 0;color:var(--muted);font-size:14px}
main{max-width:1100px;margin:0 auto;padding:32px}
.kpi{display:grid;grid-template-columns:1fr 2fr;gap:32px;margin-bottom:36px}
.kpi-card{background:var(--panel);border-radius:18px;padding:28px;border:1px solid rgba(255,255,255,.08)}
.kpi-big{font-size:64px;font-weight:700;color:var(--accent)}
.kpi-label{color:var(--muted);text-transform:uppercase;font-size:12px;letter-spacing:1px}
.kpi-text{font-size:15px;line-height:1.5;color:#89a4c7}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px}
.card{background:var(--panel);border-radius:16px;padding:22px;border:1px solid rgba(255,255,255,.08)}
.card h3{margin:0 0 8px;font-size:17px;color:var(--accent)}
.metric{font-size:36px;font-weight:700}
.ok{color:var(--ok)} .warn{color:var(--warn)}
.card p{margin:0;color:var(--muted);font-size:14px}
.section{margin-top:48px}
.section h2{font-size:20px;border-left:4px solid var(--accent);padding-left:12px}
.list{background:var(--panel);border-radius:14px;padding:20px;border:1px solid rgba(255,255,255,.08)}
.list-item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px dashed rgba(255,255,255,.08)}
.list-item:last-child{border-bottom:none}
footer{margin-top:56px;padding:24px;text-align:center;font-size:12px;color:var(--muted)}
</style>
</head>

<body>
<header>
  <h1>SOA·IACORE — Dashboard Ejecutivo</h1>
  <p>Estado consolidado del proyecto · Actualización automática</p>
</header>

<main>
<section class="kpi">
  <div class="kpi-card">
    <div class="kpi-label">Estado General</div>
    <div class="kpi-big" id="estado-general">72%</div>
  </div>
  <div class="kpi-card">
    <p class="kpi-text">
      Infraestructura y automatización cerradas al <strong>100%</strong>.<br><br>
      El avance pendiente corresponde únicamente a la consolidación ejecutiva
      del dashboard previa a la publicación final.
    </p>
  </div>
</section>

<section class="grid">
  <div class="card"><h3>Pipeline</h3><div class="metric ok" id="pipeline">100%</div><p>GitHub Pages + API</p></div>
  <div class="card"><h3>Automatización</h3><div class="metric ok" id="automatizacion">100%</div><p>Cron + SHA</p></div>
  <div class="card"><h3>Dashboard UI</h3><div class="metric warn" id="uiux">60%</div><p>Narrativa ejecutiva</p></div>
  <div class="card"><h3>Publicación Final</h3><div class="metric warn" id="publicacion">Pendiente</div><p>Cierre final</p></div>
</section>

<section class="section">
  <h2>Detalle por Fase</h2>
  <div class="list" id="detalle-fases"><div class="list-item">Cargando…</div></div>
</section>

<footer>SOA·IACORE · Inteligencia · Orden · Ejecución</footer>

<script>
fetch('status.json',{cache:'no-store'})
.then(r=>r.json()).then(d=>{
  const avg=Math.round(d.fases.reduce((a,f)=>a+f.porcentaje,0)/d.fases.length);
  estadoGeneral.innerText=avg+'%';
  detalleFases.innerHTML='';
  d.fases.forEach(f=>{
    detalleFases.innerHTML+=`<div class="list-item"><span>${f.nombre}</span><strong>${f.porcentaje}%</strong></div>`;
    if(f.nombre.includes('Push')) pipeline.innerText=f.porcentaje+'%';
    if(f.nombre.includes('Cron')) automatizacion.innerText=f.porcentaje+'%';
    if(f.nombre.includes('Dashboard')) uiux.innerText=f.porcentaje+'%';
    if(f.nombre.includes('AutoDeploy')) publicacion.innerText=f.porcentaje+'%';
  });
});
</script>
</main>
</body>
</html>
